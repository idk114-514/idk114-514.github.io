<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>姬言~❤</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="pako.min.js"></script>
  <script src="script.js" defer></script>
  <link rel="preload" as="image" href="mobile.jpg">
  <link rel="preload" as="image" href="bg.jpg">
</head>
<body>
  <div class="container">
    <h1>云养猪场</h1>
    <p>哼啊～哼啊❤咕喔❤哦咿～哼啊…咿呼…嗯哦！哦齁…哼唔❤咿哼！咕哼！咕呼！嗯喔…啊呼…哦啊❤嗯唔～</p>

    <textarea id="inputText" placeholder="请输入要加密或解密的文字..."></textarea>

    <div class="v4-section" id="v4-section">
      <div class="v4-info" id="v4EncryptInfo">V4传统模式使用文本密钥进行加密。</div>
      <div class="v4-toggle">
        <label>
          <input type="checkbox" id="v4LegacyToggle" onchange="updateV4UI()" checked> 传统模式（文本密钥）
        </label>
      </div>
      <div class="v4-e2e-keys" id="v4-e2e-keys" style="display: none;">
        <h4>公钥（把它发给你的好基友）：</h4>
        <textarea id="v4PublicKeyInput" placeholder="输入接收方的公钥以加密..."></textarea>
        <h4>私钥（仅用于解密）：</h4>
        <textarea id="v4PrivateKeyDisplay" placeholder="您的私钥会在此处显示..." readonly></textarea>
        <div class="v4-button-group">
          <button onclick="generateV4KeyPair()">生成密钥对</button>
          <button onclick="downloadV4Key('public')">下载公钥</button>
          <button onclick="downloadV4Key('private')">下载私钥</button>
          <label for="uploadPrivateKey">上传私钥</label>
          <input type="file" id="uploadPrivateKey" accept=".pem" onchange="uploadV4Key(event, 'private')">
        </div>
      </div>
    </div>

    <div class="key-section" id="key-section">
      <label for="keyInput">密钥（默认：onanii）:</label>
      <input type="text" id="keyInput" value="onanii" />
    </div>
    
    <div class="toggle-section">
      <label>
        <input type="checkbox" id="autoEncryptToggle"> 实时模式
      </label>
    </div>
    
    <div class="engine-toggle">
      <button id="engineToggle" onclick="switchEngine()" style="background:#4caf50">♿ 使用 V3 引擎（文本压缩）</button>
    </div>
    
    <div class="button-group">
      <button onclick="encryptText()">🔒 加密</button>
      <button onclick="decryptText()">🔓 解密</button>
    </div>

    <textarea id="outputText" placeholder="结果会显示在这里..." readonly></textarea>
    <div class="char-count" id="charCount">字符数: 0</div>
    <div class="copy-swap-group">
      <button id="copyBtn" onclick="copyResult()">📋 一键复制</button>
      <button id="swapBtn" onclick="swapIO()">🔁 一键交换</button>
    </div>
    <footer>
      <p>Github @ idk114-514 | 数据仅在浏览器本地处理！</p>
    </footer>
    <div id="toast" class="toast"></div>
  </div>
</body>
</html>